{
  "query": "\nCREATE TABLE IF NOT EXISTS ai_chat_sessions (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  sessionUuid VARCHAR(36) NOT NULL UNIQUE,\n  userId INT NOT NULL,\n  projectId INT,\n  taskId VARCHAR(100),\n  title VARCHAR(255) DEFAULT 'Новый чат',\n  messageCount INT DEFAULT 0,\n  lastMessageAt TIMESTAMP NULL,\n  isArchived BOOLEAN DEFAULT FALSE,\n  isPinned BOOLEAN DEFAULT FALSE,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  INDEX acs_user_idx (userId),\n  INDEX acs_project_idx (projectId),\n  UNIQUE INDEX acs_uuid_idx (sessionUuid)\n);\n\nCREATE TABLE IF NOT EXISTS ai_chat_messages (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  sessionId INT NOT NULL,\n  role ENUM('user', 'assistant', 'system') NOT NULL,\n  content TEXT NOT NULL,\n  metadata JSON,\n  isFinalized BOOLEAN DEFAULT FALSE,\n  decisionRecordId INT,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  INDEX acm_session_idx (sessionId),\n  INDEX acm_role_idx (role)\n);\n",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 3FfdjCLoumdFxBM.40c1cc0bca66 --database U4oWTJpkwb9eRxq5w7WA9g --execute \nCREATE TABLE IF NOT EXISTS ai_chat_sessions (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  sessionUuid VARCHAR(36) NOT NULL UNIQUE,\n  userId INT NOT NULL,\n  projectId INT,\n  taskId VARCHAR(100),\n  title VARCHAR(255) DEFAULT 'Новый чат',\n  messageCount INT DEFAULT 0,\n  lastMessageAt TIMESTAMP NULL,\n  isArchived BOOLEAN DEFAULT FALSE,\n  isPinned BOOLEAN DEFAULT FALSE,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  INDEX acs_user_idx (userId),\n  INDEX acs_project_idx (projectId),\n  UNIQUE INDEX acs_uuid_idx (sessionUuid)\n);\n\nCREATE TABLE IF NOT EXISTS ai_chat_messages (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  sessionId INT NOT NULL,\n  role ENUM('user', 'assistant', 'system') NOT NULL,\n  content TEXT NOT NULL,\n  metadata JSON,\n  isFinalized BOOLEAN DEFAULT FALSE,\n  decisionRecordId INT,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  INDEX acm_session_idx (sessionId),\n  INDEX acm_role_idx (role)\n);\n",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 475
}