{
  "query": "\n-- User Roles table\nCREATE TABLE IF NOT EXISTS `user_roles` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `name` varchar(64) NOT NULL UNIQUE,\n  `nameRu` varchar(64),\n  `description` text,\n  `color` varchar(32) DEFAULT '#6366f1',\n  `permissions` json NOT NULL,\n  `isSystem` boolean DEFAULT false,\n  `isDefault` boolean DEFAULT false,\n  `priority` int DEFAULT 0,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `updatedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  CONSTRAINT `user_roles_id` PRIMARY KEY(`id`)\n);\n\n-- User Role Assignments table\nCREATE TABLE IF NOT EXISTS `user_role_assignments` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `userId` int NOT NULL,\n  `roleId` int NOT NULL,\n  `assignedBy` int,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  CONSTRAINT `user_role_assignments_id` PRIMARY KEY(`id`),\n  INDEX `ura_user_idx` (`userId`),\n  INDEX `ura_role_idx` (`roleId`)\n);\n\n-- User Invitations table\nCREATE TABLE IF NOT EXISTS `user_invitations` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `email` varchar(320) NOT NULL,\n  `token` varchar(128) NOT NULL UNIQUE,\n  `roleId` int,\n  `creditLimit` int DEFAULT 1000,\n  `status` enum('pending','accepted','expired','cancelled') DEFAULT 'pending' NOT NULL,\n  `invitedBy` int NOT NULL,\n  `acceptedBy` int,\n  `acceptedAt` timestamp NULL,\n  `message` text,\n  `expiresAt` timestamp NOT NULL,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  CONSTRAINT `user_invitations_id` PRIMARY KEY(`id`),\n  INDEX `ui_email_idx` (`email`),\n  INDEX `ui_token_idx` (`token`),\n  INDEX `ui_status_idx` (`status`)\n);\n\n-- Credit Limits table\nCREATE TABLE IF NOT EXISTS `credit_limits` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `roleId` int,\n  `userId` int,\n  `dailyLimit` int DEFAULT 100,\n  `perRequestLimit` int DEFAULT 50,\n  `monthlyLimit` int DEFAULT 3000,\n  `projectLimit` int,\n  `notifyAtPercent` int DEFAULT 80,\n  `blockAtPercent` int DEFAULT 100,\n  `allowOverride` boolean DEFAULT false,\n  `isActive` boolean DEFAULT true,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `updatedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  CONSTRAINT `credit_limits_id` PRIMARY KEY(`id`),\n  INDEX `cl_role_idx` (`roleId`),\n  INDEX `cl_user_idx` (`userId`)\n);\n\n-- Pricing Plans table\nCREATE TABLE IF NOT EXISTS `pricing_plans` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `name` varchar(64) NOT NULL,\n  `nameRu` varchar(64),\n  `slug` varchar(64) NOT NULL UNIQUE,\n  `description` text,\n  `descriptionRu` text,\n  `priceMonthly` int DEFAULT 0,\n  `priceYearly` int DEFAULT 0,\n  `currency` varchar(3) DEFAULT 'USD',\n  `creditsPerMonth` int DEFAULT 1000,\n  `maxProjects` int DEFAULT 5,\n  `maxUsers` int DEFAULT 1,\n  `maxStorage` int DEFAULT 100,\n  `features` json,\n  `color` varchar(32) DEFAULT '#6366f1',\n  `icon` varchar(64) DEFAULT 'star',\n  `isPopular` boolean DEFAULT false,\n  `displayOrder` int DEFAULT 0,\n  `isActive` boolean DEFAULT true,\n  `isSystem` boolean DEFAULT false,\n  `stripeProductId` varchar(255),\n  `stripePriceIdMonthly` varchar(255),\n  `stripePriceIdYearly` varchar(255),\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `updatedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  CONSTRAINT `pricing_plans_id` PRIMARY KEY(`id`)\n);\n\n-- Model Pricing table\nCREATE TABLE IF NOT EXISTS `model_pricing` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `modelName` varchar(128) NOT NULL UNIQUE,\n  `modelDisplayName` varchar(128),\n  `provider` varchar(64) NOT NULL,\n  `inputCostPer1K` decimal(10,4) DEFAULT 1.0000 NOT NULL,\n  `outputCostPer1K` decimal(10,4) DEFAULT 2.0000 NOT NULL,\n  `planRestrictions` json,\n  `capabilities` json,\n  `isEnabled` boolean DEFAULT true,\n  `displayOrder` int DEFAULT 0,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `updatedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  CONSTRAINT `model_pricing_id` PRIMARY KEY(`id`)\n);\n\n-- User Activity Log table\nCREATE TABLE IF NOT EXISTS `user_activity_log` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `userId` int NOT NULL,\n  `action` enum('login','logout','project_created','project_deleted','ai_request','ai_generate','settings_changed','password_reset','role_changed','blocked','unblocked','credits_added','credits_spent','invitation_sent','invitation_accepted') NOT NULL,\n  `metadata` json,\n  `ipAddress` varchar(45),\n  `userAgent` text,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  CONSTRAINT `user_activity_log_id` PRIMARY KEY(`id`),\n  INDEX `ual_user_idx` (`userId`),\n  INDEX `ual_action_idx` (`action`),\n  INDEX `ual_created_idx` (`createdAt`)\n);\n",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 3FfdjCLoumdFxBM.40c1cc0bca66 --database U4oWTJpkwb9eRxq5w7WA9g --execute \n-- User Roles table\nCREATE TABLE IF NOT EXISTS `user_roles` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `name` varchar(64) NOT NULL UNIQUE,\n  `nameRu` varchar(64),\n  `description` text,\n  `color` varchar(32) DEFAULT '#6366f1',\n  `permissions` json NOT NULL,\n  `isSystem` boolean DEFAULT false,\n  `isDefault` boolean DEFAULT false,\n  `priority` int DEFAULT 0,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `updatedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  CONSTRAINT `user_roles_id` PRIMARY KEY(`id`)\n);\n\n-- User Role Assignments table\nCREATE TABLE IF NOT EXISTS `user_role_assignments` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `userId` int NOT NULL,\n  `roleId` int NOT NULL,\n  `assignedBy` int,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  CONSTRAINT `user_role_assignments_id` PRIMARY KEY(`id`),\n  INDEX `ura_user_idx` (`userId`),\n  INDEX `ura_role_idx` (`roleId`)\n);\n\n-- User Invitations table\nCREATE TABLE IF NOT EXISTS `user_invitations` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `email` varchar(320) NOT NULL,\n  `token` varchar(128) NOT NULL UNIQUE,\n  `roleId` int,\n  `creditLimit` int DEFAULT 1000,\n  `status` enum('pending','accepted','expired','cancelled') DEFAULT 'pending' NOT NULL,\n  `invitedBy` int NOT NULL,\n  `acceptedBy` int,\n  `acceptedAt` timestamp NULL,\n  `message` text,\n  `expiresAt` timestamp NOT NULL,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  CONSTRAINT `user_invitations_id` PRIMARY KEY(`id`),\n  INDEX `ui_email_idx` (`email`),\n  INDEX `ui_token_idx` (`token`),\n  INDEX `ui_status_idx` (`status`)\n);\n\n-- Credit Limits table\nCREATE TABLE IF NOT EXISTS `credit_limits` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `roleId` int,\n  `userId` int,\n  `dailyLimit` int DEFAULT 100,\n  `perRequestLimit` int DEFAULT 50,\n  `monthlyLimit` int DEFAULT 3000,\n  `projectLimit` int,\n  `notifyAtPercent` int DEFAULT 80,\n  `blockAtPercent` int DEFAULT 100,\n  `allowOverride` boolean DEFAULT false,\n  `isActive` boolean DEFAULT true,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `updatedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  CONSTRAINT `credit_limits_id` PRIMARY KEY(`id`),\n  INDEX `cl_role_idx` (`roleId`),\n  INDEX `cl_user_idx` (`userId`)\n);\n\n-- Pricing Plans table\nCREATE TABLE IF NOT EXISTS `pricing_plans` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `name` varchar(64) NOT NULL,\n  `nameRu` varchar(64),\n  `slug` varchar(64) NOT NULL UNIQUE,\n  `description` text,\n  `descriptionRu` text,\n  `priceMonthly` int DEFAULT 0,\n  `priceYearly` int DEFAULT 0,\n  `currency` varchar(3) DEFAULT 'USD',\n  `creditsPerMonth` int DEFAULT 1000,\n  `maxProjects` int DEFAULT 5,\n  `maxUsers` int DEFAULT 1,\n  `maxStorage` int DEFAULT 100,\n  `features` json,\n  `color` varchar(32) DEFAULT '#6366f1',\n  `icon` varchar(64) DEFAULT 'star',\n  `isPopular` boolean DEFAULT false,\n  `displayOrder` int DEFAULT 0,\n  `isActive` boolean DEFAULT true,\n  `isSystem` boolean DEFAULT false,\n  `stripeProductId` varchar(255),\n  `stripePriceIdMonthly` varchar(255),\n  `stripePriceIdYearly` varchar(255),\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `updatedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  CONSTRAINT `pricing_plans_id` PRIMARY KEY(`id`)\n);\n\n-- Model Pricing table\nCREATE TABLE IF NOT EXISTS `model_pricing` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `modelName` varchar(128) NOT NULL UNIQUE,\n  `modelDisplayName` varchar(128),\n  `provider` varchar(64) NOT NULL,\n  `inputCostPer1K` decimal(10,4) DEFAULT 1.0000 NOT NULL,\n  `outputCostPer1K` decimal(10,4) DEFAULT 2.0000 NOT NULL,\n  `planRestrictions` json,\n  `capabilities` json,\n  `isEnabled` boolean DEFAULT true,\n  `displayOrder` int DEFAULT 0,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `updatedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  CONSTRAINT `model_pricing_id` PRIMARY KEY(`id`)\n);\n\n-- User Activity Log table\nCREATE TABLE IF NOT EXISTS `user_activity_log` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `userId` int NOT NULL,\n  `action` enum('login','logout','project_created','project_deleted','ai_request','ai_generate','settings_changed','password_reset','role_changed','blocked','unblocked','credits_added','credits_spent','invitation_sent','invitation_accepted') NOT NULL,\n  `metadata` json,\n  `ipAddress` varchar(45),\n  `userAgent` text,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  CONSTRAINT `user_activity_log_id` PRIMARY KEY(`id`),\n  INDEX `ual_user_idx` (`userId`),\n  INDEX `ual_action_idx` (`action`),\n  INDEX `ual_created_idx` (`createdAt`)\n);\n",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 1575
}